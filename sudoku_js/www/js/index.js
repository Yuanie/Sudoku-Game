!function(e){var r={};function n(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=r,n.d=function(e,r,t){n.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:t})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,r){if(1&r&&(e=n(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(n.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var a in e)n.d(t,a,function(r){return e[r]}.bind(null,a));return t},n.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(r,"a",r),r},n.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},n.p="",n(n.s=3)}([function(e,r){function n(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function t(e){return function(e){if(Array.isArray(e)){for(var r=0,n=new Array(e.length);r<e.length;r++)n[r]=e[r];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var a={makeRow:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=new Array(9);return r.fill(e)},makeMatrix:function(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return Array.from({length:9}).map((function(){return e.makeRow(r)}))},shuffle:function(e){for(var r=e.length-2,n=0;n<=r;n++){var a=n+Math.floor(Math.random()*(e.length-n)),o=[e[a],e[n]];e[n]=o[0],e[a]=o[1]}return t(e)},checkFillable:function(e,r,n,t){for(var a=e[n],i=Array.from({length:9}).map((function(r,n){return e[n][t]})),c=o.convertToBoxIndex(n,t).boxIndex,u=o.getBoxCells(e,c),l=0;l<9;l++)if(a[l]===r||i[l]===r||u[l]===r)return!1;return!0}},o={convertToBoxIndex:function(e,r){return{boxIndex:3*Math.floor(e/3)+Math.floor(r/3),cellIndex:e%3*3+r%3}},convertFromBoxIndex:function(e,r){return{rowIndex:3*Math.floor(e/3)+Math.floor(r/3),colIndex:e%3*3+r%3}},getBoxCells:function(e,r){for(var n=3*Math.floor(r/3),t=r%3*3,a=[],o=n;o<n+3;o++)for(var i=t;i<t+3;i++)a.push(e[o][i]);return a}};e.exports=function(){function e(){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e)}var r,t,i;return r=e,i=[{key:"matrix",get:function(){return a}},{key:"box",get:function(){return o}}],(t=null)&&n(r.prototype,t),i&&n(r,i),e}()},function(e,r,n){function t(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}n(0),n(2);var a=n(4),o=n(5),i=["#FFFFFF","#4876FF","#458B00","#CD6600","#27408B","#B22222","#48D1CC","#CD00CD","#EEC900","#000000"],c=function(){function e(r){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this._$container=r}var r,n,c;return r=e,(n=[{key:"build",value:function(){var e=(new a).makePuzzle(),r=["row_g_top","row_g_middle","row_g_bottom"],n=["col_g_left","col_g_middle","col_g_right"],t=e.map((function(e){return e.map((function(e,r){var t=$("<span>").addClass(n[r%3]).text(e).addClass(e?"fixed":"empty");return e>0&&t.css({color:i[e]}),t}))})).map((function(e,n){return $("<div>").addClass("row").addClass(r[n%3]).append(e)}));this._$container.append(t)}},{key:"layout",value:function(){var e=$("span:first",this._$container).width();$("span",this._$container).height(e).css({"line-height":"".concat(e,"px"),"font-size":e<32?"".concat(e/2,"px"):""})}},{key:"check",value:function(){var e=this._$container.children().map((function(e,r){return $(r).children().map((function(e,r){return parseInt($(r).text())}))})).toArray().map((function(e){return e.toArray()})),r=new o(e);if(r.check())return!0;var n=r._matrixMarks;this._$container.children().each((function(e,r){$(r).children().each((function(r,t){$(t).is(".fixed")||n[e][r]||$(t).addClass("error")}))}))}},{key:"reset",value:function(){this._$container.find("span:not(.fixed)").removeClass("error mark1 mark2").addClass("empty").text(0)}},{key:"clear",value:function(){this._$container.find("span.error").removeClass("error")}},{key:"rebuild",value:function(){this._$container.empty(),this.build(),this.layout()}},{key:"bindPopup",value:function(e){this._$container.on("click","span",(function(r){var n=$(r.target);n.hasClass("fixed")||e.popup(n)}))}}])&&t(r.prototype,n),c&&t(r,c),e}();e.exports=c},function(e,r,n){function t(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}var a=n(0),o=function(){function e(){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e)}var r,n,o;return r=e,(n=[{key:"generate",value:function(){for(;!this.internalGenerate();)console.warn("rebuild!");return this.matrix}},{key:"internalGenerate",value:function(){var e=this;return this.matrix=a.matrix.makeMatrix(),this.orders=Array.from({length:9}).map((function(){return Array.from({length:9},(function(e,r){return r}))})).map((function(e){return a.matrix.shuffle(e)})),Array.from({length:9}).every((function(r,n){return e.fillNumber(n+1)}))}},{key:"fillNumber",value:function(e){return this.fillRow(e,0)}},{key:"fillRow",value:function(e,r){if(r>8)return!0;for(var n=this.matrix[r],t=this.orders[r],o=0;o<9;o++){var i=t[o];if(!n[i]&&a.matrix.checkFillable(this.matrix,e,r,i)){if(n[i]=e,this.fillRow(e,r+1))return!0;n[i]=0}}return!1}}])&&t(r.prototype,n),o&&t(r,o),e}();e.exports=o},function(e,r,n){n(0);var t=n(1),a=n(6),o=new t($("#container"));o.build(),o.layout();var i=new a($("#popup"));o.bindPopup(i),$("#check").on("click",(function(e){o.check()&&alert("成功！")})),$("#reset").on("click",(function(e){o.reset()})),$("#clear").on("click",(function(e){o.clear()})),$("#rebuild").on("click",(function(e){o.rebuild()}))},function(e,r,n){function t(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}var a=n(2),o=(n(0),function(){function e(){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this.matrix=(new a).generate()}var r,n,o;return r=e,(n=[{key:"makePuzzle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;return this.puzzleMatrix=this.matrix.map((function(r){return r.map((function(r){return 9*Math.random()<=e?0:r}))})),this.puzzleMatrix}}])&&t(r.prototype,n),o&&t(r,o),e}());e.exports=o},function(e,r,n){function t(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}var a=n(0),o=function(){function e(r){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this._matrix=r,this._matrixMarks=a.matrix.makeMatrix(!0),this._success=!0}var r,n,o;return r=e,o=[{key:"checkArray",value:function(e){var r=e.length,n=new Array(r);n.fill(!0);for(var t=0;t<r;t++)if(n[t]){var a=e[t];if(a)for(var o=t+1;o<r;o++)a===e[o]&&(n[t]=!1,n[o]=!1);else n[t]=!1}return n}}],(n=[{key:"check",value:function(){return this.checkRows(),this.checkCols(),this.checkBoxes(),this._success=this._matrixMarks.every((function(e){return e.every((function(e){return!0===e}))})),this._success}},{key:"checkRows",value:function(){for(var r=0;r<9;r++)for(var n=this._matrix[r],t=e.checkArray(n),a=0;a<9;a++)t[a]||(this._matrixMarks[r][a]=!1)}},{key:"checkCols",value:function(){for(var r=this,n=function(n){for(var t=Array.from({length:9}).map((function(e,t){return r._matrix[t][n]})),a=e.checkArray(t),o=0;o<9;o++)a[o]||(r._matrixMarks[o][n]=!1)},t=0;t<9;t++)n(t)}},{key:"checkBoxes",value:function(){var r=this;Array.from({length:9}).map((function(e,n){return a.box.getBoxCells(r._matrix,n)})).forEach((function(n,t){var o=e.checkArray(n);o.forEach((function(e,n){if(!o[n]){var i=a.box.convertFromBoxIndex(t,n),c=i.rowIndex,u=i.colIndex;r._matrixMarks[c][u]=!1}}))}))}},{key:"success",get:function(){return this._success}}])&&t(r.prototype,n),o&&t(r,o),e}();e.exports=o},function(e,r,n){function t(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}n(1);var a=function(){function e(r){var n=this;!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this._$panel=r.hide().removeClass("hidden"),this._$panel.on("click","span",(function(e){var r=n._$targetCell,t=$(e.target);t.hasClass("mark1")?r.hasClass("mark1")?r.removeClass("mark1"):r.removeClass("mark2").addClass("mark1"):t.hasClass("mark2")?r.hasClass("mark2")?r.removeClass("mark2"):r.removeClass("mark1").addClass("mark2"):t.hasClass("empty")?r.text(0).removeClass("mark1").removeClass("mark2").addClass("empty"):r.removeClass("empty").text(t.text()).addClass("color-".concat(t.text())),n._$panel.slideUp(500)}))}var r,n,a;return r=e,(n=[{key:"popup",value:function(e){this._$targetCell=e,this._$panel.slideDown(500)}}])&&t(r.prototype,n),a&&t(r,a),e}();e.exports=a}]);
//# sourceMappingURL=index.js.map